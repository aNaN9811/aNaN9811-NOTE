# 内存抖动（Memory Churn）

内存的使用增加、回收、增加、回收......

在程序里，每创建一个对象就会有一块内存分配给它，每分配一块内存，程序的可以用内存就少了一块。当程序占用的内存达到一定临界程度，GC就会回收掉一部分不再使用的内存

Android 里的 View.onDraw() 方法，在每次需要重绘的时候都会被调用，这时你如果在 onDraw() 里创建了对象，那么在界面频繁刷新的情况下就会创建出大量只被使用一次的对象，这就导致内存使用迅速攀升，然后很快就会触发GC进行内存回收，此时还在大量创建对象，又会触发GC，导致一直循环往复

可以通过 AndroidStudio 的 Profiler 观察到内存抖动的现象

多次内存回收行为在短时间内集中爆发会使得界面发生卡顿

所以避免在次数比较大的循环里、onDraw() 方法里创建对象

内存抖动有可能变成内存溢出，软件直接崩溃



**为什么在onDraw()里面创建对象会内存抖动而不是直接内存溢出**

首先内存抖动导致大量碎片最终还是会OOM，其次大量创建临时对象还是会被回收所以就会内存抖动，例如方法执行完了，有创建没回收就会直接OOM